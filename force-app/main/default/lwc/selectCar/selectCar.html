<template>

    <lightning-card title="Car Selector">
        
        <template if:true={isLoading}>
            <div >
                <lightning-spinner variant="brand"></lightning-spinner>
            </div>
        </template>

        <div class="slds-border_bottom">
            <lightning-layout class="divTitle slds-var-p-left_small slds-var-p-right_small slds-var-p-top_medium">Select your company:</lightning-layout>
            <lightning-layout class="slds-grid slds-wrap slds-var-p-around_large">
                <template if:false={isLoading} for:each={Owners} for:item="owner" >
                    <lightning-layout-item key={owner.id} >
                            <lightning-button
                                class="button slds-small-size_1-of-2 slds-medium-size_1-of-2 slds-var-p-right_medium slds-var-p-bottom_medium slds-float_left"
                                data-id={owner.Id}
                                variant="brand"
                                label={owner.Name}
                                onclick={askForShowrooms}>
                            </lightning-button>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
        </div>

        <div if:true={companySelected} class="slds-border_bottom">
            <lightning-layout class="divTitle slds-var-p-left_small slds-var-p-right_small slds-var-p-top_medium">Select your showroom:</lightning-layout>
            <lightning-layout class="slds-grid slds-wrap  slds-var-p-around_large">
                <template if:false={isLoading} for:each={chosenShowrooms} for:item="showroom">
                    <lightning-layout-item key={showroom.id}>
                            <lightning-button
                                class="button slds-small-size_1-of-2 slds-medium-size_1-of-2 slds-var-p-right_medium slds-var-p-bottom_medium slds-float_left"
                                data-id={showroom.Id}
                                variant="brand"
                                label={showroom.Name}
                                onclick={askForCars}>
                            </lightning-button>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
        </div>
        <div if:true={noShowrooms} >
            <p class="slds-align_absolute-center noData">NO SHOWROOMS OWNED BY THIS COMPANY</p>
        </div>

        <div if:true={showroomSelected}>
            <lightning-layout class="divTitle slds-var-p-left_small slds-var-p-right_small slds-var-p-top_medium">Select your car:</lightning-layout>
            <lightning-layout class="slds-grid slds-wrap  slds-var-p-around_large">
                <template if:false={isLoading} for:each={chosenCars} for:item="car">
                    <lightning-layout-item key={car.id}>
                            <lightning-button
                                class="button slds-small-size_1-of-2 slds-medium-size_1-of-2 slds-var-p-right_medium slds-var-p-bottom_medium slds-float_left"
                                data-id={car.Id}
                                variant="brand"
                                label={car.Full_Name__c}
                                onclick={passCarId}>
                            </lightning-button>
                    </lightning-layout-item>
                </template>
            </lightning-layout>
        </div>
        <div if:true={noCars} >
            <p class="slds-align_absolute-center noData">NO CARS ASSIGNED TO SELECTED SHOWROOM</p>
        </div>
        
        <div if:false={isLoading}>
            <c-car-details if:true={askedForDetails}
                record-id={chosenCarId}>
            </c-car-details>
        </div>

        
    </lightning-card>
</template>
